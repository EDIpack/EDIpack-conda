context:
  name: edipack
  version: "0.0.1"
  python: "3.13"
  number: "0"

package:
  name: ${{ name }}
  version: ${{ version }}

build:
  number: ${{ number }}
  string: py${{ python | replace(".", "") }}${{ hash }}_${{ number }}


requirements:
  build:
    - python=${{ python }
    - cmake
    - make
    - meson
    - meson-python
    - openmpi
    - mpi
    - if: linux
      then:    
      - gcc_impl_linux-64 ==13.3.0
      - gfortran_impl_linux-64 ==13.3.0
      - libgcc-ng ==13.3.0
      - libgfortran5 ==13.3.0
      - libstdcxx-ng ==13.3.0
      - sysroot_linux-64 ==2.17
    - if: osx
      then:
        - compilers
  host:
    - python=${{ python }
    - numpy
    - mpi4py
    - openmpi
    - pkgconfig #the python module
    - meson-python
    - pip
    - setuptools
    - wheel
    - mpi4py
    - if: linux
      then:
        - sysroot_linux-64 ==2.17
        - mkl <2025  # [linux]
        - mkl-devel <2025  # [linux]
        - mkl-include <2025  # [linux]
    - if: osx
      then:
        - openblas  # [osx]
        - lapack  # [osx]
        - scalapack  # [osx]
  run:
    - python=${{ python }}
    - pkgconfig #the python module
    - numpy
    - mpi4py
    - openmpi
    - if: linux
      then:
        - mkl <2025  # [linux]
    - if: osx
      then:
        - openblas  # [osx]
        - lapack  # [osx]
        - scalapack  # [osx]

about:
  repository: https://github.com/EDIpack/EDIpack
  documentation: https://edipack.github.io/EDIpack
  license: GPL-3.0-or-later
  summary: "EDIpack quantum impurity solver"
  description: |
    EDIpack is a massively parallel Lanczos-based quantum impurity solver.

